[Unit]
Description=Varnish HTTP accelerator

[Service]
Type=forking
LimitNOFILE=131072
LimitMEMLOCK=82000
ExecStartPre=/usr/sbin/varnishd -C -f /etc/varnish/default.vcl
ExecStart=/usr/sbin/varnishd -a 0.0.0.0:80 -T 127.0.0.1:6082 -f /etc/varnish/default.vcl -S /etc/varnish/secret -s file,/var/lib/varnish/default_storage.bin,1GB -p thread_pools=4 -p thread_pool_min=5 -p thread_pool_max=500 -p thread_pool_timeout=300
ExecReload=/usr/share/varnish/reload-vcl

[Install]
WantedBy=multi-user.target